# Phase 2 모델 개발 및 최적화 과정 요약

본 문서는 Phase 2 공급망 계획 모델의 초기 버전부터 최종 최적화 버전까지의 개발 과정을 요약합니다. 각 스크립트의 주요 수정 사항과 그 논리적 근거를 기술하여, 팀원이 보고서 작성 시 참고할 수 있도록 하는 것을 목적으로 합니다.

---

## 1. `location.py`: 전략적 네트워크 설계

### 초기 모델의 문제점
- '건설비 + 단순 운송비' 최소화에만 집중하여 다음과 같은 근본적인 결함을 가짐:
  - **결함 1**: 선택된 공장들의 총생산 능력이 전체 수요를 감당할 수 있는지 보장하지 못함.
  - **결함 2**: 운송 리드타임이 길어질 때 발생하는 막대한 '재고 유지 비용'을 무시함.

### 주요 업그레이드 내역

#### Upgrade 1: 생산 능력 제약 (Capacity Constraint) 추가
* **변경 사항**: Gurobi 최적화 모델에 **"선택된 공장들의 총생산 능력이 전체 수요량보다 크거나 같아야 한다"**는 제약 조건을 추가함.
* **수정 논리**: 초기 시뮬레이션에서 발생한 낮은 Fill-Rate의 근본 원인 중 하나인 '공급 능력 부족'을 원천 차단하고, 안정적인 수요 충족의 전제 조건을 입지 선정 단계에서부터 확보하기 위함.

#### Upgrade 2: 예상 재고 비용 (Inventory Cost Proxy) 반영
* **변경 사항**: 최적화 모델의 목적 함수에 **'리드타임으로 인해 예상되는 재고 비용'**을 근사한 항을 추가함.
* **수정 논리**: 건설비/운송비가 싸더라도 리드타임이 길면 막대한 재고 비용이 발생함. 이 '숨겨진 비용'까지 입지 선정 단계부터 고려하여, 전체 공급망 관점에서 진정한 비용 최소화를 달성하는 네트워크를 설계하기 위함.

---

## 2. `strategy.py`: 지능형 전술 계획 수립

### 초기 전략의 문제점
- 모든 제품(SKU)과 운송 경로에 '평균 N일치 재고 유지'와 같은 획일적인 규칙을 적용하여, 수요 특성이 다른 제품들을 똑같이 취급하는 비효율 발생.

### 주요 업그레이드 내역

#### Upgrade 1: 반복적 튜닝 및 '50일' 기준점 확립
* **변경 사항**: 단일 변수 `SAFETY_DAYS`를 30일, 60일, 45일 등으로 변경하며 반복적으로 시뮬레이션을 실행함.
* **수정 논리**:
    > **"왜 50일인가?"에 대한 답변**
    >
    > 복잡한 공급망의 최적 재고 수준은 이론만으로 알 수 없으므로, 데이터 기반의 실험적 접근을 채택함. 여러 시뮬레이션을 통해 `SAFETY_DAYS` = 50일 때 Fill-Rate가 목표치인 95%를 안정적으로 상회하는 것을 확인함. 48일을 했을 때 fill rate가 94%로 하락하여 목표치 미충족, 50 초과의 값은 fill rate가 높은 대신 총 비용도 크게 증가하는 것을 확인
    >
    > 이 '50일'이라는 값은 우리가 설계한 공급망 네트워크가 수요 변동성을 감당하기 위해 평균적으로 필요한 재고 버퍼 수준을 의미하는 핵심 인사이트이자, 모든 후속 재고 전략을 수립하는 **객관적인 기준점(Baseline)**이 됨.

#### Upgrade 2: 차등 재고 정책 (Differentiated Inventory) 도입
* **변경 사항**: SKU를 판매량(ABC)과 수요 변동성(XYZ) 기준으로 자동 분류하고, `SAFETY_DAYS_MATRIX`를 통해 9개 그룹별로 다른 안전 재고 일수를 적용함.
* **수정 논리**: '평균 50일'이라는 재고 예산을 모든 SKU에 획일적으로 배분하는 것은 비효율적. 수요 기여도가 높고 변동성이 큰 핵심 SKU('AZ' 등)에는 50일 이상의 재고를 집중하고, 안정적인 SKU('AX' 등)의 재고는 50일보다 적게 유지하여 전체 재고 비용을 절감하면서도 목표 Fill-Rate를 효과적으로 방어함.

#### Upgrade 3: 운송 모드 최적화 (Total Landed Cost)
* **변경 사항**: 국제 운송 시, 운송비와 리드타임 중 발생하는 재고 비용을 합산한 **총 소유 비용(TLC)**을 계산하여 배(Ship)와 비행기(Air) 중 더 저렴한 모드를 자동으로 선택함.
* **수정 논리**: 가장 싼 운송수단이 항상 최적이 아니라는 점에 착안. 운송비가 비싸도 재고 비용 감소 효과가 더 크다면 비행기가 유리할 수 있음. 두 비용을 통합적으로 고려하여 진정한 의미의 물류비용 최적화를 달성함.
